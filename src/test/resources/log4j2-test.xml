<?xml version="1.0" encoding="UTF-8"?>
<Configuration status="WARN">
    <Filters>
        <MarkerBasedBurstFilter>
            <MatchMarker marker="global:throttle:1s:1logs" interval="1" timeUnit="MILLISECONDS" maxLogs="1"/>
            <MatchMarker marker="global:throttle:1s:2logs" interval="1" timeUnit="MILLISECONDS" maxLogs="2"/>
            <MatchMarker marker="global:throttle:2s:2logs" interval="2" timeUnit="MILLISECONDS" maxLogs="2"/>
        </MarkerBasedBurstFilter>
    </Filters>
    <Appenders>
        <Console name="Console" target="SYSTEM_OUT">
            <PatternLayout pattern="%d{HH:mm:ss.SSS} %-5level %c{2} - %msg%n"/>
        </Console>
        <MarkerBasedCountingNopAppender name="CountingNopAppender"/>
    </Appenders>
    <Loggers>
        <Root level="info">
            <AppenderRef ref="Console"/>
        </Root>

        <Logger name="at.mlangc.log4j2.MarkerBasedBurstFilterTest">
            <AppenderRef ref="CountingNopAppender"/>
            <MarkerBasedBurstFilter>
                <MatchMarker marker="logger-specific:throttle:1s:1logs" interval="1" maxLogs="1" timeUnit="MILLISECONDS"/>
            </MarkerBasedBurstFilter>
        </Logger>

        <Logger name="at.mlangc.log4j2.MarkerBasedBurstFilterTest.Other">
            <AppenderRef ref="CountingNopAppender"/>
        </Logger>
    </Loggers>
</Configuration>
